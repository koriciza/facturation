{% extends "base.html" %}
{% block content %}
<div class="card">
    <div class="card-header">
        <h2>ğŸ‘¤ {{ client.nom }} {{ client.prenom }}</h2>
        <div>
            <a href="{{ url_for('client_edit', id=client.id) }}" class="btn btn-warning">âœï¸ Modifier</a>
            <a href="{{ url_for('clients_list') }}" class="btn btn-primary">â†©ï¸ Retour</a>
        </div>
    </div>
    
    <div class="flex gap-10">
        <div style="flex: 1;">
            <p><strong>Adresse :</strong> {{ client.adresse }}</p>
            <p><strong>Ville :</strong> {{ client.ville }}</p>
            <p><strong>Pays :</strong> {{ client.pays }}</p>
        </div>
        <div style="flex: 1;">
            <p><strong>TÃ©lÃ©phone :</strong> {{ client.telephone }}</p>
            <p><strong>Email :</strong> {{ client.email }}</p>
        </div>
    </div>
</div>

<div class="card">
    <h3>ğŸ“‹ Factures du client</h3>
    
    {% if client.factures %}
    <div class="table-responsive">
        <table>
            <thead>
                <tr>
                    <th>NÂ° Facture</th>
                    <th>Date</th>
                    <th>Total</th>
                    <th>Ã‰tat</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for facture in client.factures %}
                <tr>
                    <td>{{ facture.numero }}</td>
                    <td>{{ facture.date.strftime('%d/%m/%Y') }}</td>
                    <td>{{ "%.2f"|format(facture.total) }} â‚¬</td>
                    <td>
                        <span style="padding: 5px 10px; border-radius: 5px; background: {% if facture.etat == 'PayÃ©e' %}#c6f6d5{% elif facture.etat == 'En attente' %}#fed7d7{% else %}#fed7d7{% endif %};">
                            {{ facture.etat }}
                        </span>
                    </td>
                    <td>
                        <a href="{{ url_for('facture_detail', id=facture.id) }}" class="btn btn-primary btn-sm">ğŸ‘ï¸</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="text-center">Aucune facture pour ce client</p>
    {% endif %}
</div>
{% endblock %}