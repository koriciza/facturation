{% extends "base.html" %}
{% block content %}
<div class="card">
    <div class="card-header">
        <h2>ğŸ“‹ Liste des Factures</h2>
        <a href="{{ url_for('facture_new') }}" class="btn btn-success">â• Nouvelle Facture</a>
    </div>
    
    <div class="table-responsive">
        <table>
            <thead>
                <tr>
                    <th>NÂ° Facture</th>
                    <th>Date</th>
                    <th>Client</th>
                    <th>Total</th>
                    <th>Ã‰tat</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for facture in factures %}
                <tr>
                    <td><strong>{{ facture.numero }}</strong></td>
                    <td>{{ facture.date.strftime('%d/%m/%Y') }}</td>
                    <td>{{ facture.client.nom }} {{ facture.client.prenom }}</td>
                    <td><strong>{{ "{:,.0f}".format(facture.total).replace(',', ' ') }} FBU </strong></td>
                    <td>
                        
                        <style>
                        .etat-badge {
                            padding: 5px 10px;
                            border-radius: 5px;
                            display: inline-block;
                        }
                        .etat-paye {
                            background: #c6f6d5;
                        }
                        .etat-attente, .etat-impaye {
                            background: #fed7d7;
                        }
                        </style>

                        {% set badge_class = 'etat-paye' if facture.etat == 'PayÃ©e' else 'etat-attente' %}
                        <span class="etat-badge {{ badge_class }}">
                            {{ facture.etat }}
                        </span>
                    </td>
                    <td>
                        <a href="{{ url_for('facture_detail', id=facture.id) }}" class="btn btn-primary btn-sm">ğŸ‘ï¸</a>
                        <a href="{{ url_for('facture_edit', id=facture.id) }}" class="btn btn-warning btn-sm">âœï¸</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}